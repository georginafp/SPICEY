name: pkgdown

on:
  push:
  branches: [main]

jobs:
  deploy:
  runs-on: ubuntu-latest

permissions:
  contents: write
pages: write
id-token: write

steps:
  - uses: actions/checkout@v3
- uses: r-lib/actions/setup-r@v2

- name: Install dependencies
uses: r-lib/actions/setup-r-dependencies@v2
with:
  extra-packages: |
  any::pkgdown
any::rmarkdown
any::knitr
any::BiocManager

- name: Install bioconductor deps
run: |
  Rscript -e 'BiocManager::install()'
Rscript -e 'BiocManager::install(c("biomaRt", "GenomeInfoDb"))'

- name: Build site
run: Rscript -e 'pkgdown::build_site()'

- name: Deploy to GitHub Pages
uses: JamesIves/github-pages-deploy-action@v4
with:
  branch: gh-pages
folder: docs
